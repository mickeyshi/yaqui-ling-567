Changfei Shi
2/18/2021
Lab 7 Report 

--
LAST WEEK CHANGES:

Made following changes to semi.vpm, to better fall in line with mrs.tdl (as suggested by last week lab report)

E.ASPECT : ASPECT
  prog <> progressive
  pfv <> perfective
  cmpl <> completive
  incep <> inceptive
  ipfv <> imperfective
  rel <> rel
  hab <> habitual
  prosp <> prospective
  * >> no-aspect
  no-aspect << [e]

E.MOOD : MOOD
  ind <> indicative
  irr <> irrealis
  imp <> imperfective
  sbjv <> subjunctive
  directive <> directive
  desid <> desid
  quot <> quotative
  ev <> ev
  * >> ind
  ind << [e]

--

1. Hiaki has fairly a simple non-verbal predicate system:
For adjectives and noun predicates, there is no copula - a speaker just puts the adjective or noun after the subject noun, without any additional affixes.

Uu sewa tutuli
the flower pretty
"The flower is pretty".

Uu hamut hitevi
the woman healer
"The woman is a healer."

However, to express "becoming" the noun or adjective, the affix "-tu" is added after the noun/verb.

Uu hamut hitevi-tu
the woman healer-BECOME
"The woman is becoming a healer."

Uu sewa tutuli-tu
the flower pretty-BECOME
"The flower is becoming pretty".

This can be inflected with the verbal tense affix system already established for intransitive verbs. 

Uu hamut hitevi-tu-ne
the woman healer-BECOME-FUT
"The woman will become a healer."

Uu hamut hitevi-tu-k
the woman healer-BECOME-PST.PRF
"The woman became a healer."

Uu hamut hitevi-tu-kan
the woman healer-BECOME-PST.IMPF
"The woman was a healer."

Uu sewa tutuli-tu-ne
the flower pretty-BECOME-FUT
"The flower will become pretty".

Uu sewa tutuli-tu-k
the flower pretty-BECOME-PST
"The flower became pretty".

Uu sewa tutuli-tu-kan
the flower pretty-BECOME-PST.IMPF
"The flower was very pretty".

For prepositional phrases, Hiaki mostly uses a locative noun affix "-po" that seems to give the noun a prepositional role in the sentence. 

Vempo kawi-po hoa-k
3.SG.NOM mountain-LOC live-k
"They used to live in the mountains"

Locatives are expressed via situative verbs that possibly entail the manner in which one is situated: 

Waasa-po itepo hooka-n
Field-LOC 1.PL.NOM sit.down.PL-IMPF
"We were there" or "We sat there"

Waasa-po itepo hooka-n
Field-LOC 1.PL.NOM stand.PL-IMPF
"We were there" or "We stood there"

According to my source, if no info is provided on bodily position, we use the  existential 'be/do' verb aayuk: 

Hitaa kari-po aayu-k?
What house-LOC be/do-PERF
"What was in the house?" 

Hiaki doesn't allow locative predicates, but as a consequence of the current implementation of noun predicates we're unable to bar sentences derived from noun predicates from taking locative modifiers, causing ostensibly ungrammatical sentences like:

Maria kari-po

to be parsed as VP PP.

--

2. 


Small fixes:
-Fix "_pron_n_rel" to "pron_n_rel" in lexicon.tdl (Simple replacement)


Morphology:

Tweaked the example given in the writeup a little to produce locative PPs from locative-marked NPs. Note the addition of COORD - on the locative-pp phrase to prevent NP-Bs from being made into adpositions. 

;; Adpositions
locative-pp-phrase := unary-phrase &
[ SYNSEM [ NON-LOCAL #nl,
           LOCAL [ CAT [ HEAD adp & [ PRD -,
				      MOD < [ LOCAL intersective-mod &
                                                    [ CAT.HEAD verb,
                                                      CONT.HOOK.INDEX #xarg ] ] > ],
		          VAL [ COMPS < >,
			        SUBJ < >,
				SPEC < >,
			        SPR < > ]],
		COORD - ]],
    C-CONT [ HOOK [ LTOP #ltop,
		    INDEX #index,
		    XARG #xarg ],
	  RELS.LIST < arg12-ev-relation &
		   [ PRED "_loc_p_rel",
		     LBL #ltop,
		     ARG0 #index,
		     ARG1 #xarg,
		     ARG2 #dtr ] >,
	     HCONS.LIST < >  ],
	  ARGS < [ SYNSEM [ NON-LOCAL #nl,
		            LOCAL [ CAT [ HEAD noun & [CASE loc],
		                          VAL.SPR < > ],
				    COORD -,
			            CONT.HOOK [ INDEX #dtr ]]]] > ].
						
Likewise, slightly altered the VP-from-NP rule given in the lab. 

;; Stand-alone NP predicates
n-bar-predicate-rule := unary-phrase & nocoord & tense-marked-verb-pc-rule-dtr &
  [ SYNSEM [ LOCAL.CAT [ HEAD verb , 
                   VAL [
		   SPR < >,
		   COMPS < >,
		   SPEC < >,
                   SUBJ < [ LOCAL [ CONT.HOOK.INDEX #arg1,
                             CAT [ HEAD noun,
                      VAL.SPR < > ] ] ] > ] ],
             NON-LOCAL #nl ],
    C-CONT [ HOOK [ LTOP #ltop,
            INDEX #index,
            XARG #arg1 ],
         RELS.LIST < arg12-ev-relation &
           [ PRED "_be_v_id_rel",
             LBL #ltop,
             ARG0 #index,
             ARG1 #arg1,
             ARG2 #arg2 ],
           quant-relation &
           [ PRED "exist_q_rel",
             ARG0 #arg2,
             RSTR #harg ] >,
         HCONS.LIST < qeq & [ HARG #harg, LARG #larg ] > ],
    ARGS < [ SYNSEM [ LOCAL [ CAT [ HEAD noun & [CASE nom],
                     VAL.SPR cons ],
                  CONT.HOOK [ INDEX #arg2,
                                      LTOP #larg ]],
                  NON-LOCAL #nl ] ] > ].
				
Altered the adjective phrase to permit NP subjects, with PRD + marked to allow adjectival predicates in sentence formation.


basic_adjective-adj-lex := attr-adj-lex &
  [ SYNSEM  [ NON-LOCAL non-local-none,
	      LOCAL.CAT [ VAL.SUBJ < [ 
					      LOCAL.CAT [ HEAD noun &
						     [ CASE nom ],
						VAL [ SPR < >,
						      COMPS < > ] ] ] >,
                       HEAD.PRD + ] ] ].



Big morphology changes:
-The cascading network of rule dependencies became too confusing. Instead of three separate rules that add plural, case, and locative markers, now instead we have a single rule that handles all valid permutations of case/number:
	-  noun-pc5_name=numbered-cased-noun_pc
  noun-pc5_order=suffix
  noun-pc5_inputs=noun112, noun114, noun115, noun116, noun117, noun118, noun119, noun121, noun122, noun123, noun124, noun125, noun127, noun128, noun-pc4, noun-pc14, noun-pc23
    noun-pc5_lrt1_name=plural-nom-or-acc-noun-lrt
      noun-pc5_lrt1_feat1_name=number
      noun-pc5_lrt1_feat1_value=pl
      noun-pc5_lrt1_feat1_head=itself
      noun-pc5_lrt1_feat2_name=case
      noun-pc5_lrt1_feat2_value=nom, acc
      noun-pc5_lrt1_feat2_head=itself
      noun-pc5_lrt1_lri1_inflecting=yes
      noun-pc5_lrt1_lri1_orth=-m
    noun-pc5_lrt2_name=singular-nom-noun-lrt
      noun-pc5_lrt2_feat1_name=number
      noun-pc5_lrt2_feat1_value=sg
      noun-pc5_lrt2_feat1_head=itself
      noun-pc5_lrt2_feat2_name=case
      noun-pc5_lrt2_feat2_value=nom
      noun-pc5_lrt2_feat2_head=itself
      noun-pc5_lrt2_lri1_inflecting=no
    noun-pc5_lrt3_name=singular-acc-noun-lrt
      noun-pc5_lrt3_feat1_name=number
      noun-pc5_lrt3_feat1_value=sg
      noun-pc5_lrt3_feat1_head=itself
      noun-pc5_lrt3_feat2_name=case
      noun-pc5_lrt3_feat2_value=acc
      noun-pc5_lrt3_feat2_head=itself
      noun-pc5_lrt3_lri1_inflecting=yes
      noun-pc5_lrt3_lri1_orth=-ta
    noun-pc5_lrt4_name=singular-locative-noun_lrt
      noun-pc5_lrt4_feat1_name=number
      noun-pc5_lrt4_feat1_value=sg
      noun-pc5_lrt4_feat1_head=itself
      noun-pc5_lrt4_feat2_name=case
      noun-pc5_lrt4_feat2_value=loc
      noun-pc5_lrt4_feat2_head=itself
      noun-pc5_lrt4_lri1_inflecting=yes
      noun-pc5_lrt4_lri1_orth=-po
    noun-pc5_lrt5_name=plural-locative-noun_lrt
      noun-pc5_lrt5_feat1_name=number
      noun-pc5_lrt5_feat1_value=pl
      noun-pc5_lrt5_feat1_head=itself
      noun-pc5_lrt5_feat2_name=case
      noun-pc5_lrt5_feat2_value=loc
      noun-pc5_lrt5_feat2_head=itself
      noun-pc5_lrt5_lri1_inflecting=yes
      noun-pc5_lrt5_lri1_orth=-m-po
	  
	Matrix: Case
			NOM		ACC		LOC
Num	sg		""		"-ta"	"-po"
	pl		"-m"	"-m"	"-m-po"
	
	This simpler system prevents underspecification of case, which was causing the preposition rule to overgenerate (as any plural phrase could become a locative phrase due to case being underspecified.) I had initially attempted a nonlocative rule marking every case besides LOC, but I was having trouble making it obligatory and dealing with the dependencies, especially with certain verbs ( the irregular "siika", for instance). This system handles all verb-case pairings and doesn't leave anything underspecified.  
	

Added nom-case noun subject to adjectives (where an empty SUBJ < > value existed previously), as I've only been able to find examples of adjective predicates taking nominal-case nouns.

basic_adjective-adj-lex := attr-adj-lex &
  [ SYNSEM  [ NON-LOCAL non-local-none,
	      LOCAL.CAT [ VAL.SUBJ < [ 
					      LOCAL.CAT [ HEAD noun &
						     [ CASE nom ],
						VAL [ SPR < >,
						      COMPS < > ] ] ] >,
                       HEAD.PRD + ] ] ].
	
---
Miscellaneous changes:

-Removed noun-pc15 - the NMZR for verb phrases. This should be handled by a rule similar to the ones implemented this week.

Removed the adpositions from the input of poss-unary phrase, to reduce some ambiguity arising from locatives adpositions being changed into determiners:

poss-unary-phrase

    ARGS < [ SYNSEM [ LOCAL [ CAT [ VAL [ SPR < >,
                                          COMPS < >,
                                          SUBJ < >,
                                          SPEC < > ],
                                    HEAD noun ],
                              CONT.HOOK.INDEX #possessor ],
                      NON-LOCAL #nonloc ] ] > ].
--

-Made ropte "sink" intransitive. 
ropte := intransitive-verb-verb-lex &
  [ STEM < "ropte" >,
    SYNSEM.LKEYS.KEYREL.PRED "_sink_v_rel" ].
	
With this (as well the changes made to the locative preposition), the following IGT should parse:
mercedes va'a-po Jose-ta ropte-tua .
Mercedes water-LOC Jose-ACC sink-CAUS . 
 "Mercedes is making him dive under the water."@@
 
Added root for "be hungry" to lexicon.tdl. Note that I've made given this verb "a_rel" in line with the other stuff. 

tevaure := intransitive-verb-verb-lex &
  [ STEM < "tevaure" >,
    SYNSEM.LKEYS.KEYREL.PRED "_hungry_a_rel" ].
	
-Changed the root from verb to include verbs and adjectives, to allow sentences with adjectival roots. 

root := sign &
  [ SYNSEM [ NON-LOCAL non-local-none,
             LOCAL [ COORD -,
                     CAT [ VAL [ SUBJ < >,
                                 COMPS < > ],
                           MC +,
                           HEAD +vj &
                                [ NMZ -,
				  PRD +,
				  
With this change, the following should parse.
Uu sewa tutuli
The flower pretty
"The flower is pretty".

--

Commented out the ex-det, ex-adj, and ex-comp rules in rules.tdl. After making the VP predicate from NP rule, there was a kind of exponential increase in the amount of parses - due to extracted wh-phrases compounding with the new VPs. This was to make the model runnable within 5 minutes, rather than thirty minutes to an hour. 

; ex-comp := extracted-comp-phrase.

; ex-adj := basic-extracted-adj-phrase.

 ex-subj := extracted-subj-phrase.

wh-ques := wh-ques-phrase.

in-situ-ques := insitu-int-cl.

; ex-det := extracted-det-phrase.

--
Added some case constraints onto what-noun-noun-lex, to prevent it from coordinating with locative nouns.  
what-noun-noun-lex := wh-pronoun-noun-lex &
  [ SYNSEM.LOCAL.CAT.HEAD.CASE nom+acc ].




3. 

Sentences 15 and 17 produces the following grammatical output when translating from English to Hiaki:

Chuu'u-m tevaure
Chuu'u-m tevaure-o
Chuu'u-m tevaure-ka
Chuu'u-m tevaure-ka-o

Chuu'u-m-po miisi-m
Chuu'u-m miisi-m
Chuu'u-m-po miisi-wa-m
Chuu'u-m miisi-wa-m

Sentence 16 does not parse, because there's no obvious mapping from the English "The dogs are in the park" due to the "in_rel" of the MRS.

I added a second lexical entry for "waasa" [field] for "_park_n_rel", but because there's no "in" analogue in Hiaki, the grammar produces the following error:
NOTE: 1 transfer results	RAM: 24k
NOTE: EP '"_in_p_rel"' is unknown in the semantic index
WARNING: EP '"_in_p_rel"' is not covered
NOTE: 1 readings, added 206 / 75 edges to chart (26 fully instantiated, 34 actives used, 18 passives used)	RAM: 707k
NOTE: parsed 1 / 1 sentences, avg 707k, time 0.01473s
NOTE: transfered 1 / 1 sentences, avg 24k, time 0.00111s
NOTE: 66 passive, 196 active edges in final generation chart; built 131 passives total. [0 results]

The most probable sentence would be:

Ume chuu'u-m waasa-po aayu
3.PL.DET dog-PL field-LOC be/available
"The dogs are at/in the park" 

which does parse, but produces different MRS (and several ambiguous sentences, due to the lack of constraints on adpositions.) 


4.

The following sentence from the corpus parses:

Havee ka'ate-k martimiano-po
Who go-PST.PRF Martimiano-LOC
And who is there at Martimiano?

Likewise, the example sentence demonstrating wh-words parses with a proper-seeming MRS:

Hitaa kari-po aayu-k?
What house-LOC be/available-PST.PRF

The following sentence from the corpus illustrates wh- words, but the parser doesn't quite get it right, as the two parses coordinate the wh-word and the NP. I'm actually unsure how this is supposed to be parsed, because I would expect noun predicates to be intransitive.

have empo yo'owak 
who 2.SG.NOM parents ? 
Who are your parents?

The implemented rules generally seem to play nicely with wh-words. 

I've actually been unable to find examples of wh-words interacting with adjectival predicates in the corpus. Generally, it seems like adjectival phrases are simply given a question intonation, instead of using the wh-word:

14700@@@@-1@@ketun hiapsa ?@@@@1@3@still  be alive ? // Is he still alive?@@


5.
	1. Prior to the changes, on the testsuite, 68.8% of items parsed, while 79.2% of items parsed after the changes. The remaining items are the inflected "BECOME" nouns indicating a tense-marked change of state on the predicate - "uu sewa tutuli-tu-ne", for instance.
	
	On the corpus, 12.0% parsed prior to the changes made this week, while 17.6% parsed afterward.
	
	2. 5.21 average analyses for the corpus, compared to 6.96 previously. 3.74 average analyses on the test suite, compared to 2.7 average analyses on the testsuite previously.
	
	3. 138 max parses.  on "Hunaman enchi-m familia-m aman nu'u-ne tea hia". Most instances of this ambiguity in this sentence are due to two subsequent plural marked nouns allowing for coordination as well as separate case roles for the two values. 
	
	4. Due to the optionality of subjects and objects in Hiaki, singular nouns are now being parsed as valid noun predicates, and previously coordinated noun phrases are now being coordinated as verb phrases. Additionally, certain determiners that share spellings with 3rd-person pronouns (the shortened "aa") are now coordinating as VPs.
	
	In the sentence:
	aa chuu'u-wa si bwe'u .
	3sg.POSS dog-pssd very big . 
	"His dog is fat."@@
	
	The verb predicate being formed by "aa" is actually coordinating with the N "chuu'wa" via the NON-EVENT-SUBJ-HEAD rule. 
	
	Larger sentences with multiple affixes and locatives are causing some extraneous parses:
	
	mercedes va'a-po Jose-ta ropte-tua .
	Mercedes water-LOC Jose-ACC sink-CAUS . 
	"Mercedes is making him dive under the water."
	
	is overgenerating because the added valence on the causative affix.
	
	


